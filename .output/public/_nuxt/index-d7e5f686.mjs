import{_ as I,l as R,$ as z,aS as B,aT as F,aU as D,V as E,aV as O,g as N,aW as A,aJ as H,aX as Y,aY as j,at as J,s as c,m as L,r as n,ao as g,c as i,h as p,C as m,b as s,w as l,o as t,a as P,t as W,z as v,p as $}from"./entry-f2f8a875.mjs";R.add(z,B,F);const X={meta:{breadcrumb:"index",title:"Tasks"},inject:["i18n","route","toastr","errorHandler"],directives:{tooltip:VTooltip,clickOutside:D},components:{Avatar:E,EnsoDatepicker:O,EnsoTable:N,FilterState:A,VueSwitch:H,VPopover,Filters:Y,Flags:j,EnsoSelect:J},setup(){return c(1.1),c(!1),c({tasks:{completed:!1,flag:null,allocated_to:null}}),c({tasks:{reminder:{min:null,max:null}}}),c({dateInterval:"today",overdue:null}),{one:L(()=>store.state[enums].user.meta)}}},q={class:"wrapper"},G={class:"icon is-small has-text-info is-clickable"},K={key:1,class:"icon is-naked is-clickable is-small"},M={key:1,class:"icon is-naked is-clickable is-small"},Q={key:0,class:"allocated-to"};function Z(a,r,x,w,ee,ae){const V=n("filters"),d=n("fa"),y=n("flags"),u=n("v-popover"),b=n("enso-datepicker"),f=n("avatar"),h=n("enso-select"),C=n("vue-switch"),T=n("enso-table"),S=n("filter-state"),k=g("tooltip"),U=g("click-outside");return t(),i("div",q,[a.ready?(t(),p(V,{key:0,filters:a.filters,intervals:a.intervals,params:a.params},null,8,["filters","intervals","params"])):m("",!0),s(T,{class:"box is-paddingless raises-on-hover",filters:a.filters,intervals:a.intervals,params:a.params,onReady:r[0]||(r[0]=e=>a.ready=!0),onReset:r[1]||(r[1]=e=>a.$refs.filterState.reset()),id:"tasks",ref:"table"},{name:l(({row:e})=>[P("span",null,W(e.name),1),v((t(),i("span",G,[s(d,{icon:"info-circle",size:"xs"})])),[[k,e.description]])]),flag:l(({row:e,column:o})=>[s(u,{trigger:"click",ref:`flag-${e.id}`},{popover:l(()=>[a.isOpen(`flag-${e.id}`)?(t(),p(y,{key:0,modelValue:e.flag,"onUpdate:modelValue":_=>e.flag=_,onInput:_=>{a.update(e.id,"flag",e.flag),a.$refs[`flag-${e.id}`].hide()}},null,8,["modelValue","onUpdate:modelValue","onInput"])):m("",!0)]),default:l(()=>[o.enum._get(e.flag)?(t(),i("span",{key:0,class:$(["icon is-clickable",`has-text-${o.enum._get(e.flag).toLowerCase()}`])},[s(d,{icon:"flag"})],2)):(t(),i("span",K,[s(d,{icon:"cog",size:"xs"})]))]),_:2},1536)]),reminder:l(({row:e})=>[s(u,{trigger:"click","auto-hide":!1,ref:`reminder-${e.id}`},{popover:l(()=>[a.isOpen(`reminder-${e.id}`)?v((t(),p(b,{key:0,class:"reminder-picker",modelValue:e.rawReminder,"onUpdate:modelValue":o=>e.rawReminder=o,format:"Y-m-d H:i:s",time:"","alt-format":a.dateFormat},null,8,["modelValue","onUpdate:modelValue","alt-format"])),[[U,()=>{a.update(e.id,"reminder",e.rawReminder),a.$refs[`reminder-${e.id}`].hide()}]]):m("",!0)]),default:l(()=>[e.reminder?v((t(),i("span",{key:0,class:$(["icon is-clickable",e.overdue?"has-text-danger":"has-text-success"])},[s(d,{icon:"clock"})],2)),[[k,e.reminder]]):(t(),i("span",M,[s(d,{icon:"cog",size:"xs"})]))]),_:2},1536)]),allocatedTo:l(({row:e})=>[a.canChangeAllocation?(t(),p(u,{key:0,trigger:"click",ref:`allocated_to-${e.id}`},{popover:l(()=>[a.isOpen(`allocated_to-${e.id}`)?(t(),i("div",Q,[s(h,{modelValue:e.allocatedTo.id,"onUpdate:modelValue":o=>e.allocatedTo.id=o,onSelect:o=>{a.update(e.id,"allocated_to",e.allocatedTo.id),a.$refs[`allocated_to-${e.id}`].hide()},source:"tasks.users","disable-clear":"",label:"person.name"},null,8,["modelValue","onUpdate:modelValue","onSelect"])])):m("",!0)]),default:l(()=>[s(f,{class:"is-24x24 is-clickable",user:e.allocatedTo},null,8,["user"])]),_:2},1536)):(t(),p(f,{key:1,class:"is-24x24",user:e.allocatedTo},null,8,["user"]))]),completed:l(({row:e})=>[s(C,{class:"is-medium",modelValue:e.completed,"onUpdate:modelValue":o=>e.completed=o,onInput:o=>a.update(e.id,"completed",e.completed)},null,8,["modelValue","onUpdate:modelValue","onInput"])]),createdBy:l(({row:{createdBy:e}})=>[s(f,{class:"is-24x24",user:e},null,8,["user"])]),_:1},8,["filters","intervals","params"]),s(S,{"api-version":a.apiVersion,name:"taskFilters",filters:a.filters,params:a.params,onReady:r[2]||(r[2]=e=>a.ready=!0),ref:"filterState"},null,8,["api-version","filters","params"])])}var le=I(X,[["render",Z]]);export{le as default};
