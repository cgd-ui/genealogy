import{_,l as I,u as q,ai as L,f as $,a1 as U,aj as A,ak as D,al as B,am as S,an as w,s as u,m as c,r as k,ao as H,c as n,a as i,z as p,B as h,h as N,w as z,C as a,b as l,G as T,H as y,t as m,D as E,ap as j,o as t,aq as K,p as P}from"./entry-f2f8a875.mjs";I.add([q,L,$,U,A,D]);const F={meta:{breadcrumb:"how to",title:"How To"},inject:["canAccess","errorHandler","i18n","route","toastr"],directives:{focus:B},components:{Uploader:S,HowToVideo:w},setup(){u([]),u(""),u([]),u({name:null,description:null,tagList:[]}),u(!1),u(!1),u(null),u(!1),c(()=>this.route("howTo.videos.store")),c(()=>this.taggingId?this.videos.filter(({id:e})=>e===this.taggingId):this.selectedTags.length===0?this.videos:this.videos.filter(({tagList:e})=>e.filter(o=>this.selectedTags.findIndex(({id:f})=>o===f)!==-1).length===this.selectedTags.length)),c(()=>this.query?this.tags.filter(({name:e,id:o})=>!this.video.tagList.includes(o)&&e.toLowerCase().indexOf(this.query.toLowerCase())>-1):this.tags.filter(({id:e})=>!this.video.tagList.includes(e))),c(()=>!!this.query&&this.tags.findIndex(({name:e})=>e.toLowerCase()===this.query.toLowerCase())===-1),c(()=>this.tags.filter(({selected:e})=>e)),c(()=>this.selectedTags.length===1&&this.selectedTags[0]),created(()=>{this.getVideos(),this.getTags()})}},G={class:"columns is-reverse-mobile"},M={class:"column is-three-quarters-desktop is-full-touch"},O={key:0,class:"columns animated fadeInDown"},J={class:"column is-narrow"},Q={class:"control"},R=["placeholder"],W={class:"column"},X={class:"control is-expanded"},Y=["placeholder"],Z={class:"column is-narrow is-flex"},x={key:0,class:"control animated fadeIn"},ee={class:"file-cta"},se={class:"file-icon"},ie={class:"file-label"},oe={class:"icon"},te={key:1,class:"control animated fadeIn"},ne={class:"icon"},ae={class:"columns is-multiline"},le={class:"column is-one-quarter"},de=["disabled"],re={class:"icon is-small"},ue={class:"box has-background-light raises-on-hover"},ce={class:"level"},ge={class:"level-left"},ve={class:"level-item"},pe={class:"label"},he={class:"icon is-small"},me={class:"level-right"},fe={class:"level-item"},ke={class:"icon is-small"},Te={class:"icon is-small"},ye={class:"icon is-small"},we={class:"icon is-small"},Ve={class:"field is-grouped is-grouped-multiline mt-2"},be={class:"tags has-addons"},Ce=["onClick"],_e=["onClick"];function Ie(e,o,f,qe,Le,d){const r=k("fa"),V=k("uploader"),b=w,C=H("focus");return t(),n("div",G,[i("div",M,[e.addingVideo||e.editingVideo?(t(),n("div",O,[i("div",J,[i("div",Q,[p(i("input",{class:"input",type:"text",placeholder:d.i18n("Video name"),"onUpdate:modelValue":o[0]||(o[0]=s=>e.video.name=s)},null,8,R),[[C],[h,e.video.name]])])]),i("div",W,[i("div",X,[p(i("textarea",{class:"textarea",rows:"2",type:"text",placeholder:d.i18n("Video description"),"onUpdate:modelValue":o[1]||(o[1]=s=>e.video.description=s)},null,8,Y),[[h,e.video.description]])])]),i("div",Z,[e.video.name?(t(),n("div",x,[e.addingVideo?(t(),N(V,{key:0,url:e.uploadLink,params:e.video,"file-size-limit":2e7,"file-key":"video",onUploadSuccessful:o[2]||(o[2]=s=>{e.reset(),e.getVideos()})},{control:z(({controlEvents:s})=>[i("a",K(s),[i("span",ee,[i("span",se,[l(r,{icon:"upload"})]),i("span",ie,m(d.i18n("Video"))+"\u2026 ",1)])],16)]),_:1},8,["url","params"])):a("",!0),e.editingVideo?(t(),n("a",{key:1,class:"button is-outlined is-success",onClick:o[3]||(o[3]=s=>{e.video=e.video,e.update()})},[i("span",oe,[l(r,{icon:"check"})])])):a("",!0)])):a("",!0),e.addingVideo||e.editingVideo?(t(),n("div",te,[i("a",{class:"button is-danger is-outlined",onClick:o[4]||(o[4]=s=>e.reset())},[i("span",ne,[l(r,{icon:"ban"})])])])):a("",!0)])])):a("",!0),i("div",ae,[(t(!0),n(T,null,y(e.filteredVideos,(s,g)=>(t(),n("div",{class:"column is-half",key:g},[l(b,{class:"is-rounded raises-on-hover",video:s,tags:e.tags,onStartTagging:v=>{e.video=s,e.taggingId=e.video.id},onStopTagging:v=>{e.video=s,e.taggingId=null,e.update()},onDelete:v=>e.videos.splice(g,1),onUpdate:v=>{e.video=s,e.update()},onEdit:v=>{e.video=s,e.editingVideo=!0}},null,8,["video","tags","onStartTagging","onStopTagging","onDelete","onUpdate","onEdit"])]))),128))])]),i("div",le,[d.canAccess("howTo.videos.store")?(t(),n("a",{key:0,class:"button is-info is-fullwidth mb-2",disabled:e.addingVideo||e.editingVideo,onClick:o[5]||(o[5]=s=>e.addingVideo=!0)},[i("span",null,m(d.i18n("Add video")),1),i("span",re,[l(r,{icon:"plus"})])],8,de)):a("",!0),i("div",ue,[i("div",ce,[i("div",ge,[i("div",ve,[i("label",pe,[i("span",he,[l(r,{icon:"tags",size:"xs"})]),E(" "+m(d.i18n("Tags")),1)])])]),i("div",me,[i("div",fe,[d.canAccess("howTo.tags.store")&&e.query&&e.tagIsNew?(t(),n("a",{key:0,class:"button is-small is-outlined is-success",onClick:o[6]||(o[6]=(...s)=>e.addTag&&e.addTag(...s))},[i("span",ke,[l(r,{icon:"check"})])])):a("",!0),d.canAccess("howTo.tags.update")&&!e.query&&e.selectedTag?(t(),n("a",{key:1,class:"button is-small is-outlined is-danger",onClick:o[7]||(o[7]=s=>e.editingTag=!0)},[i("span",Te,[l(r,{icon:"pencil-alt"})])])):a("",!0),e.editingTag?(t(),n("a",{key:2,class:"button is-small is-outlined is-success ml-1",onClick:o[8]||(o[8]=s=>{e.editingTag=!1,e.updateTag()})},[i("span",ye,[l(r,{icon:"check"})])])):a("",!0),e.editingTag?(t(),n("a",{key:3,class:"button is-small is-outlined ml-1",onClick:o[9]||(o[9]=s=>e.editingTag=!1)},[i("span",we,[l(r,{icon:"ban"})])])):a("",!0)])])]),e.editingTag?p((t(),n("input",{key:0,class:"input",type:"text","onUpdate:modelValue":o[10]||(o[10]=s=>e.selectedTag.name=s)},null,512)),[[h,e.selectedTag.name]]):p((t(),n("input",{key:1,class:"input",type:"text","onUpdate:modelValue":o[11]||(o[11]=s=>e.query=s),onKeypress:o[12]||(o[12]=j((...s)=>e.addTag&&e.addTag(...s),["enter"]))},null,544)),[[h,e.query]]),i("div",Ve,[(t(!0),n(T,null,y(e.filteredTags,s=>(t(),n("div",{class:"control",key:s.id},[i("div",be,[i("span",{class:P(["tag is-white is-clickable",{"is-bold":s.selected}]),onClick:g=>e.taggingId?e.video.tagList.push(s.id):s.selected=!s.selected},m(s.name),11,Ce),d.canAccess("howTo.tags.destroy")&&!e.taggingId?(t(),n("a",{key:0,class:"tag is-delete is-white",onClick:g=>e.deleteTag(s.id)},null,8,_e)):a("",!0)])]))),128))])])])])}var Ue=_(F,[["render",Ie]]);export{Ue as default};
